<section class="mx-auto max-w-3xl p-6">
  <!-- Header -->
  <header class="flex items-center justify-between mb-6">
    <h1 class="text-2xl font-semibold">My Todos</h1>
    <button
      type="button"
      (click)="addTodo()"
      class="rounded-xl bg-blue-600 px-4 py-2 text-sm font-medium text-white hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500"
    >
      + Add
    </button>
  </header>

  <!-- Loading -->
  @if (loading()) {
    <div class="space-y-3">
      <div class="animate-pulse h-14 rounded-xl bg-gray-200"></div>
      <div class="animate-pulse h-14 rounded-xl bg-gray-200"></div>
      <div class="animate-pulse h-14 rounded-xl bg-gray-200"></div>
    </div>
  } @else {
    <!-- Empty State -->
    @if (filteredTodos().length === 0) {
      <div class="text-center py-12">
        <div class="mx-auto mb-3 h-12 w-12 rounded-full bg-gray-100 flex items-center justify-center">üìù</div>
        <p class="text-gray-700 font-medium">No todos found</p>
        <p class="text-gray-500 text-sm">Try adding a new todo.</p>
      </div>
    } @else {
      <!-- Todo List -->
      <ul class="space-y-3">
        @for (t of filteredTodos(); track t.id) {
          <li
            class="rounded-xl border border-gray-200 bg-white p-4 flex items-center justify-between"
          >
            <div class="flex items-start gap-3">
              <input
                type="checkbox"
                [checked]="t.completed"
                class="mt-1 h-4 w-4 rounded border-gray-300 text-blue-600 focus:ring-blue-500"
              />

              <div>
                <div class="flex items-center gap-2">
                  <h2
                    class="text-sm sm:text-base font-medium"
                    [class.line-through]="t.completed"
                    [class.text-gray-400]="t.completed"
                  >
                    {{ t.title }}
                  </h2>
                  <div
                    class="text-xs px-2 py-0.5 rounded-full"
                    [ngClass]="{
                      'bg-red-100 text-red-700': t.priority === 'high',
                      'bg-amber-100 text-amber-700': t.priority === 'medium',
                      'bg-emerald-100 text-emerald-700': t.priority === 'low'
                    }"
                  >
                    {{ t.priority | titlecase }}
                  </div>
                </div>

                @if (t.description) {
                  <p class="mt-1 text-xs text-gray-600">
                    {{ t.description }}
                  </p>
                }

                @if (t.dueDate) {
                  <p class="mt-2 text-xs text-gray-500">
                    Due: {{ t.dueDate | date:'mediumDate' }}
                  </p>
                }
              </div>
            </div>

            <div class="flex items-center gap-2">
              <button
                type="button"
                (click)="edit(t)"
                class="rounded-lg border border-gray-300 px-3 py-1.5 text-sm hover:bg-gray-50"
              >
                Edit
              </button>
              <button
                type="button"
                class="rounded-lg bg-rose-600 px-3 py-1.5 text-sm text-white hover:bg-rose-700"
              >
                Delete
              </button>
            </div>
          </li>
        }
      </ul>
    }
  }
</section>

<router-outlet></router-outlet>